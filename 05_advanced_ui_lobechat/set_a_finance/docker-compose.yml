# Lab 05: Advanced UI — LobeChat Sovereign Interface
# This configures a local, fully sovereign instance of LobeChat
# connected to the Ollama models running on this host system.

version: '3.8'

services:
  lobechat:
    image: lobehub/lobe-chat
    container_name: sovereign-lobechat
    ports:
      - "3200:3200"
    environment:
      # Expose the app on a custom port instead of default 3210
      - PORT=3200

      # ── SOVEREIGN CONFIGURATION ──
      # Disable cloud provider integrations
      - OPENAI_API_KEY=
      - ACCESS_CODE=sovereign2026

      # ── OLLAMA INTEGRATION ──
      # Enable the Ollama provider
      - OLLAMA_PROXY_URL=http://host.docker.internal:11434/v1
      # (Optional) Pre-fetch these models into the UI list
      - OLLAMA_MODEL_LIST=llama3.2,qwen2.5-coder:7b

    # Allow the container to route 'host.docker.internal' to the actual host
    extra_hosts:
      - "host.docker.internal:host-gateway"

    restart: always

# Usage:
# Run: docker compose up -d
# Access at: http://localhost:3200
